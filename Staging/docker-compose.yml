
services:
  weather-service:
    image: hnrkjnsn/testservice:latest
    build:
      context: ../TestService
      dockerfile: ../TestService/Dockerfile
    ports:
      - 5001:8080
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - ConnectionStrings:Redis=redis-cache
      - OTEL_RESOURCE_ATTRIBUTES="service.name=resource-tutorial-dotnet,service.namespace=tutorial,service.version=1.0,service.instance.id=`uuidgen`,host.name=`HOSTNAME`,host.type=`uname -m`,os.name=`uname -s`,os.version=`uname -r`"
    volumes:
      - ~/.vsdbg:/remote_debugger:rw
    depends_on:
      - redis-cache

  redis-cache:
    image: redis:alpine
    ports:
      - 6379:6379
    volumes:
      - redis-data:/data

volumes:
  redis-data: